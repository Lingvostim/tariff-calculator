<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Калькулятор тарифов</title>

<style>
:root{
  --bg1:#0b1020;
  --bg2:#0e1222;
  --card:rgba(255,255,255,.05);
  --line:rgba(255,255,255,.12);
  --text:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.62);
  --accent:#6b5cff;
  --success:#16a34a;
  --radius:18px;
}

*{box-sizing:border-box}

body{
  margin:0;
  font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 15% 10%, rgba(107,92,255,.22), transparent 55%),
    radial-gradient(900px 700px at 85% 90%, rgba(22,163,74,.16), transparent 60%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  min-height:100vh;
  padding:24px 14px;
}

.wrap{max-width:980px;margin:0 auto}

h1{margin:0 0 6px;font-size:clamp(22px,3vw,30px)}
.hint{margin:0 0 16px;color:var(--muted);font-size:13px}

.grid{display:grid;gap:16px}
@media(min-width:860px){.grid{grid-template-columns:360px 1fr}}

.card{
  background:linear-gradient(180deg,var(--card),rgba(255,255,255,.03));
  border:1px solid var(--line);
  border-radius:var(--radius);
  overflow:hidden;
  box-shadow:0 18px 60px rgba(0,0,0,.35);
  transition:transform .2s ease, box-shadow .2s ease;
}
.card:hover{
  transform:translateY(-2px);
  box-shadow:0 22px 70px rgba(0,0,0,.45);
}

.head{
  padding:14px 16px;
  border-bottom:1px solid var(--line);
  background:rgba(255,255,255,.03);
}
.head h2{
  margin:0;
  font-size:13px;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.3px;
}
.body{padding:16px}

.row{margin-bottom:12px}
label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}

/* INPUT + STEPPERS */
.inputWrap{position:relative}
input{
  width:100%;
  padding:12px 52px 12px 12px;
  border-radius:12px;
  background:rgba(255,255,255,.04);
  border:1px solid var(--line);
  color:var(--text);
  font-size:15px;
  transition:border-color .15s ease, box-shadow .15s ease;
}
input:focus{
  outline:none;
  border-color:rgba(107,92,255,.9);
  box-shadow:0 0 0 3px rgba(107,92,255,.22);
}

/* hide native spinners */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button{ -webkit-appearance:none; margin:0 }
input[type=number]{ -moz-appearance:textfield }

.stepper{
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  display:grid;
  grid-template-rows:1fr 1fr;
  gap:6px;
}
.stepBtn{
  width:34px;
  height:18px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:rgba(255,255,255,.85);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:0;
  user-select:none;
  transition:background .12s ease, transform .12s ease;
}
.stepBtn:active{transform:translateY(1px)}

.actions{
  display:flex;
  gap:10px;
  margin-top:10px;
  flex-wrap:wrap;
}
button{
  padding:12px 14px;
  border-radius:14px;
  border:0;
  cursor:pointer;
  font-weight:700;
  transition:transform .12s ease, box-shadow .12s ease;
}
button.primary{
  background:linear-gradient(135deg,var(--accent),rgba(107,92,255,.8));
  color:white;
}
button.primary:active{transform:translateY(1px)}
button.secondary{
  background:rgba(255,255,255,.08);
  border:1px solid var(--line);
  color:var(--text);
}
@media(max-width:640px){
  .actions button{flex:1 1 100%}
}

.summary{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:14px;
}
.pill{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  font-size:13px;
}
.pill.total b{color:var(--success);font-size:16px}

/* TABLE */
.tableWrap{
  overflow:auto;
  border-radius:14px;
  border:1px solid var(--line);
}
table{width:100%;border-collapse:collapse;min-width:420px}
thead th{
  padding:12px;
  font-size:12px;
  color:var(--muted);
  text-align:left;
  background:rgba(255,255,255,.04);
}
tbody tr{
  animation:rowIn .25s ease both;
}
tbody td{
  padding:12px;
  border-top:1px solid rgba(255,255,255,.08);
}
td.right{text-align:right}

@keyframes rowIn{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1;transform:none}
}

/* MOBILE */
.mobileList{display:none}
@media(max-width:640px){
  .tableWrap{display:none}
  .mobileList{display:grid;gap:10px}
  .mobileCard{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:14px;
    padding:16px 18px;
    border-radius:14px;
    border:1px solid var(--line);
    background:rgba(255,255,255,.06);
    animation:rowIn .25s ease both;
  }
  .mc-left{
    font-size:14px;
    color:var(--muted);
    white-space:nowrap;
  }
  .mc-right{
    font-size:16px;
    font-weight:700;
    color:var(--success);
    white-space:nowrap;
  }
}
</style>
</head>

<body>
<div class="wrap">
<h1>Калькулятор тарифов</h1>
<p class="hint">Мгновенный расчёт стоимости</p>

<div class="grid">

<section class="card">
<div class="head"><h2>Параметры</h2></div>
<div class="body">

<div class="row">
<label>Количество мест (max)</label>
<div class="inputWrap" data-stepper>
<input id="places" type="number" value="12" min="1" step="1">
<div class="stepper">
<button class="stepBtn" data-step="up">▲</button>
<button class="stepBtn" data-step="down">▼</button>
</div>
</div>
</div>

<div class="row">
<label>Цена за человека ₽</label>
<div class="inputWrap" data-stepper>
<input id="price" type="number" value="680" min="0" step="10">
<div class="stepper">
<button class="stepBtn" data-step="up">▲</button>
<button class="stepBtn" data-step="down">▼</button>
</div>
</div>
</div>

<div class="row">
<label>Минимум Гостей</label>
<div class="inputWrap" data-stepper>
<input id="minPeople" type="number" value="3" min="1" step="1">
<div class="stepper">
<button class="stepBtn" data-step="up">▲</button>
<button class="stepBtn" data-step="down">▼</button>
</div>
</div>
</div>

<div class="actions">
<button class="primary" id="calc">Рассчитать</button>
<button class="secondary" id="reset">Сброс</button>
</div>

</div>
</section>

<section class="card">
<div class="head"><h2>Результат</h2></div>
<div class="body">

<div class="summary">
<div class="pill">Мест: <b id="sPlaces">—</b></div>
<div class="pill">Цена: <b id="sPrice">—</b></div>
<div class="pill total">Итого: <b id="sTotal">—</b></div>
</div>

<div class="tableWrap">
<table>
<thead>
<tr><th>Чел.</th><th class="right">Итого, ₽</th></tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>

<div class="mobileList" id="mobileList"></div>

</div>
</section>

</div>
</div>

<script>
const el=id=>document.getElementById(id)
const fmt=new Intl.NumberFormat("ru-RU")

function clamp(input,v){
  const min=input.min!==""?+input.min:-1e9
  const max=input.max!==""?+input.max:1e9
  return Math.min(max,Math.max(min,v))
}
function stepInput(input,dir){
  const step=input.step&&input.step!=="any"?+input.step:1
  input.value=clamp(input,(+input.value||0)+(dir==="up"?step:-step))
  input.dispatchEvent(new Event("input",{bubbles:true}))
}

/* FIXED STEPPERS */
document.querySelectorAll("[data-stepper]").forEach(w=>{
  const input=w.querySelector("input")
  const up=w.querySelector('[data-step="up"]')
  const down=w.querySelector('[data-step="down"]')
  let t=null,i=null

  const start=dir=>{
    stepInput(input,dir)
    t=setTimeout(()=>{ i=setInterval(()=>stepInput(input,dir),90) },350)
  }
  const stop=()=>{ clearTimeout(t); clearInterval(i) }

  up.addEventListener("pointerdown",e=>{e.preventDefault();start("up")})
  down.addEventListener("pointerdown",e=>{e.preventDefault();start("down")})
  ;["pointerup","pointerleave","pointercancel"].forEach(ev=>{
    up.addEventListener(ev,stop)
    down.addEventListener(ev,stop)
  })
})

function calculate(){
  const max=+el("places").value
  const price=+el("price").value
  const min=+el("minPeople").value
  if(min>max)return

  el("tbody").innerHTML=""
  el("mobileList").innerHTML=""

  for(let n=min;n<=max;n++){
    const total=n*price
    el("tbody").innerHTML+=`<tr><td>${n}</td><td class="right">${fmt.format(total)}</td></tr>`
    el("mobileList").innerHTML+=`
      <div class="mobileCard">
        <span class="mc-left">${n} человек</span>
        <b class="mc-right">${fmt.format(total)} ₽</b>
      </div>`
  }

  el("sPlaces").textContent=max
  el("sPrice").textContent=fmt.format(price)+" ₽"
  el("sTotal").textContent=fmt.format(max*price)+" ₽"
}

el("calc").onclick=calculate
el("reset").onclick=()=>{places.value=12;price.value=680;minPeople.value=3;calculate()}
;[places,price,minPeople].forEach(i=>i.addEventListener("input",calculate))

calculate()
</script>
</body>
</html>

